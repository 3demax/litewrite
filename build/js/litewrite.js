function $(e){return document.getElementById(e)}function show(e){$("editor").value=localStorage.getItem(e+"_html")||"",localStorage.setItem("current-document",e)}function select(){document.createRange().setStart($("editor"),0),getSelection().removeAllRanges(),getSelection().addRange(document.createRange())}function create(){id=++localStorage.last_id,$("editor").value="",localStorage.setItem(id,""),location.hash="#"+id,select(),updateList(),$("editor").focus()}function updateList(){var e=parseInt(localStorage.last_id)+1,t=[];for(var n=0;n<e;++n){var r=localStorage.getItem(n);r&&t.push('<a id="item_'+n+'" href="#'+n+'">'+r.slice(0,50)+"</a>")}$("entries").innerHTML=t.join(""),highlightSelected()}function check(){var e=location.hash;e?(id=e.slice(1),id in localStorage&&show(id)):(show(localStorage.getItem("current-document")),location.hash="#"+localStorage.getItem("current-document")),updateList(),select(),document.getElementsByTagName("body")[0].className=localStorage.getItem("bgcolor"),$("aside").className="visible",setTimeout(function(){$("aside").className=""},2e3)}function setTitle(e){if(e.length>=30){var t=e.lastIndexOf(" ")+1;t&&(e=e.slice(0,t)),e+="..."}document.title=e}function highlightSelected(){var e=location.hash.slice(1);if(!e)return;var t=$("item_"+e);t&&(t.className+=" selected",setTitle(t.textContent))}function colorToggle(){var e=document.getElementsByTagName("body")[0];e.className=="dark"?(e.className="",localStorage.setItem("bgcolor","")):(e.className="dark",localStorage.setItem("bgcolor","dark"))}function formatting(){for(i=0;i<$("editor").getElementsByTagName("div").length;i++)$("editor").getElementsByTagName("div")[i].innerHTML.substring(0,1)=="#"?$("editor").getElementsByTagName("div")[i].className="subheading":$("editor").getElementsByTagName("div")[i].className=""}var id=localStorage.last_id=localStorage.last_id||0;$("editor").onkeyup=$("editor").onpaste=function(e){var t=e.target.value;t!=localStorage.getItem(id+"_html")&&(localStorage.setItem(id,e.target.value),localStorage.setItem(id+"_html",t),updateList()),formatting()},onload=onhashchange=check