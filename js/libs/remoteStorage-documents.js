define(["require","remotestorage"],function(e){e("remotestorage");var t="documents";return remoteStorage.defineModule(t,function(e){function r(e,t){if(e=="error")for(var r=0;r<n.length;r++)n[r](t)}function i(){var e="",t,n;for(t=0;t<32;t++){n=Math.random()*16|0;if(t===8||t===12||t===16||t===20)e+="-";e+=(t===12?4:t===16?n&3|8:n).toString(16)}return e}function s(t){function r(){return e.getListing(t+"/")}function s(n){var r=e.getObject(t+"/"+n);return r?r.content:""}function o(e){return s(e).slice(0,50)}function u(n,r){r===""?e.remove(t+"/"+n):e.storeObject("text",t+"/"+n,{content:r})}function a(n){var r=i();return e.storeObject("text",t+"/"+r,{content:n}),r}function f(t,r){e.on(t,r),t=="error"&&n.push(r)}function l(n,r){e.storeObject("text",t+"/"+n,r)}function c(n){var r=e.getObject(t+"/"+n);return r?r:{}}return e.use(t+"/"),{getIds:r,getContent:s,getTitle:o,setContent:u,set:l,get:c,add:a,on:f}}var n=[];return{name:t,dataHints:{module:"documents can be text documents, or etherpad-lite documents or pdfs or whatever people consider a (text) document. But spreadsheets and diagrams probably not","objectType text":"a human-readable plain-text document in utf-8. No html or markdown etc, they should have their own object types","string text#content":"the content of the text document","directory documents/notes/":"used by litewrite for quick notes","item documents/notes/calendar":"used by docrastinate for the 'calendar' pane","item documents/notes/projects":"used by docrastinate for the 'projects' pane","item documents/notes/personal":"used by docrastinate for the 'personal' pane"},exports:{getPrivateList:s,onChange:function(t,n){e.on("change",function(e){var r=e.relativePath.match(new RegExp("^"+t+"/(.+)$"));r&&(e.id=r[1],n(e))})}}}}),remoteStorage[t]})