define(["require","backbone","utils/backbone.remoteStorage-documents"],function(e){var t=e("backbone"),n=e("utils/backbone.remoteStorage-documents");return Doc=t.Model.extend({defaults:{title:"",url:"",content:"",lastEdited:undefined},sync:n,initialize:function(){this.on("change:content",this.updateLastEdited).on("change:content",this.updateTitle)},isEmpty:function(){return this.get("content").match(/^(<\/{0,1}div>|<br>|\s|&nbsp;)*?$/)!==null},updateLastEdited:function(){this.set("lastEdited",(new Date).getTime())},updateTitle:function(){var e=this.get("content").match(/^(<div>|<\/div>|<br>|\s|&nbsp;)*(.*?)(<div>|<\/div>|<br>|$)/)[2].replace(/&nbsp;/gi,"");this.set("title",e)},getOpacity:function(){var e=(new Date).getTime()-this.get("lastEdited"),t=12096e5,n=e>t?.1:Math.round((.1+(t-e)/t*.9)*100)/100;return n}}),Doc})